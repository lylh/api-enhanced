name: Issue Management
permissions:
  issues: write
  contents: read

on:
  issues:
    types: [opened, labeled]
  issue_comment:
    types: [created]

jobs:
  welcome-new-issues:
    if: github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
      - name: Welcome new issue
        uses: peter-evans/create-or-update-comment@v5
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ğŸ‘‹ æ„Ÿè°¢æ‚¨æäº¤issueï¼

            æˆ‘ä»¬å·²ç»æ”¶åˆ°æ‚¨çš„åé¦ˆï¼Œç»´æŠ¤è€…ä¼šå°½å¿«æŸ¥çœ‹å¹¶å›å¤ã€‚

            ç”±äºäºŒå¼€ä½œè€…æ˜¯é«˜ä¸­ç”Ÿ, åªèƒ½åœ¨éå·¥ä½œæ—¥å¤„ç†issue, è¯·è€å¿ƒç­‰å¾…ã€‚

            åœ¨ç­‰å¾…å›å¤æœŸé—´ï¼Œæ‚¨å¯ä»¥ï¼š
            - ğŸ“– æŸ¥çœ‹[é¡¹ç›®æ–‡æ¡£](https://neteasecloudmusicapienhanced.js.org)
            - ğŸ’¬ åŠ å…¥[QQäº¤æµç¾¤](https://qm.qq.com/q/TpeP9Uv2yk) è¿›è¡Œå®æ—¶è®¨è®º
            - ğŸ” æœç´¢[ç°æœ‰issues](https://github.com/neteasecloudmusicapienhanced/api-enhanced/issues) çœ‹æ˜¯å¦æœ‰ç±»ä¼¼é—®é¢˜

  handle-help-wanted:
    if: contains(github.event.issue.labels.*.name, 'question')
    runs-on: ubuntu-latest
    steps:
      - name: Add help resources
        uses: peter-evans/create-or-update-comment@v5
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

            è¿™é‡Œæœ‰ä¸€äº›å¯èƒ½å¯¹æ‚¨æœ‰ç”¨çš„èµ„æºï¼š

            ğŸ“š **æ–‡æ¡£èµ„æº**
            - [é¡¹ç›®æ–‡æ¡£](https://neteasecloudmusicapienhanced.js.org)

            ğŸ” **å¸¸è§é—®é¢˜**
            - æœç´¢[å·²å…³é—­çš„issues](https://github.com/neteasecloudmusicapienhanced/api-enhanced/issues?q=is%3Aissue+is%3Aclosed) çœ‹çœ‹æ˜¯å¦æœ‰ç±»ä¼¼çš„é—®é¢˜å·²ç»è¢«è§£ç­”ã€‚

            ğŸ’¬ **å³æ—¶å¸®åŠ©**
            - åŠ å…¥QQç¾¤ï¼šhttps://qm.qq.com/q/TpeP9Uv2yk

            å¦‚æœä»¥ä¸Šèµ„æºæ— æ³•è§£å†³æ‚¨çš„é—®é¢˜ï¼Œè¯·æä¾›æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šå°½å¿«ä¸ºæ‚¨è§£ç­”ï¼

            ç”±äºäºŒå¼€ä½œè€…æ˜¯é«˜ä¸­ç”Ÿ, åªèƒ½åœ¨éå·¥ä½œæ—¥å¤„ç†issue, è¯·è€å¿ƒç­‰å¾…ã€‚

  stale-issues:
    if: github.event.action == 'opened'
    runs-on: ubuntu-latest
    steps:
      - name: Mark stale issues
        uses: actions/stale@v10
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          stale-issue-message: |
            è¿™ä¸ªissueå·²ç»30å¤©æ²¡æœ‰æ´»åŠ¨äº†ã€‚

            å¦‚æœè¿™ä¸ªé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·å›å¤æ­¤è¯„è®ºè¯´æ˜å½“å‰çŠ¶æ€ã€‚
            å¦åˆ™ï¼Œè¿™ä¸ªissueå°†åœ¨7å¤©åè‡ªåŠ¨å…³é—­ã€‚

            æ‚¨å¯ä»¥éšæ—¶é‡æ–°æ‰“å¼€å·²å…³é—­çš„issueã€‚
          stale-pr-message: |
            è¿™ä¸ªPRå·²ç»30å¤©æ²¡æœ‰æ´»åŠ¨äº†ã€‚

            å¦‚æœæ‚¨ä»åœ¨å¤„ç†è¿™ä¸ªPRï¼Œè¯·å›å¤æ­¤è¯„è®ºã€‚
            å¦åˆ™ï¼Œè¿™ä¸ªPRå°†åœ¨7å¤©åè‡ªåŠ¨å…³é—­ã€‚
          days-before-stale: 30
          days-before-close: 7
          stale-issue-label: "stale"
          stale-pr-label: "stale"
          exempt-issue-labels: "pinned,enhancement,priority:high,ongoing,fatal"
          exempt-pr-labels: "pinned,priority:high,ongoing,fatal"